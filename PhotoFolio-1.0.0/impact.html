<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Environmental Footprint Calculator</title>
    <style>
      /* General Styles */
      body {
        font-family: "Arial", sans-serif;
        margin: 0;
        padding: 0;
        background-color: #f8f9fa;
        color: #333;
        display: flex;
        justify-content: center;
        align-items: center;
        min-height: 100vh;
      }

      .container {
        text-align: center;
        background: url("./assets/img/gallery/im.webp") no-repeat center center;
        background-size: cover;
        padding: 40px;
        border-radius: 15px;
        box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.1);
        width: 90%;
        max-width: 600px;
        color: #000; /* Changed text color to black */
      }

      h1 {
        font-size: 28px;
        color: #000; /* Black text for the heading */
      }

      p {
        font-size: 16px;
        color: #000; /* Black text for paragraph */
        margin-bottom: 20px;
      }

      select,
      input,
      button {
        width: 80%;
        padding: 10px;
        margin: 10px auto;
        font-size: 16px;
        border: 1px solid #ddd;
        border-radius: 5px;
        outline: none;
        box-shadow: 0px 4px 6px rgba(0, 0, 0, 0.1);
        transition: all 0.3s ease-in-out;
      }

      button {
        background-color: #3cb371;
        color: white;
        cursor: pointer;
        font-weight: bold;
      }

      button:hover {
        background-color: #2e8b57;
      }

      input:hover,
      select:hover {
        border-color: #3cb371;
      }

      .footer {
        font-size: 12px;
        color: #000; /* Black text for footer */
        margin-top: 20px;
      }

      .hidden {
        display: none;
      }

      /* Animations */
      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(-20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .fade-in {
        animation: fadeIn 1s ease-out;
      }

      #chartContainer {
        margin-top: 20px;
      }

      canvas {
        margin-top: 20px;
        width: 100% !important;
        height: auto !important;
      }
    </style>
  </head>
  <body>
    <!-- Welcome Page -->
    <div id="welcomePage" class="container fade-in">
      <h1>Environmental Footprint Calculator</h1>
      <p>Let's calculate your environmental impact.</p>
      <p>
        The test takes approximately <b>5 minutes</b> and covers three sections:
        <b>Housing</b>, <b>Travel</b>, and <b>Consumption</b>.
      </p>
      <select id="country">
        <option value="" selected disabled>Select your country</option>
        <option value="India">India</option>
        <option value="USA">USA</option>
        <option value="UK">UK</option>
      </select>
      <button onclick="goToNamePage()">Start the Test</button>
      <div class="footer">Powered by Sustainability</div>
    </div>

    <!-- Name Page -->
    <div id="namePage" class="container hidden fade-in">
      <h1>Enter Your Name</h1>
      <input type="text" id="name" placeholder="Your Name" />
      <button onclick="goToDataPage()">Next</button>
    </div>

    <!-- Data Input Page -->
    <div id="dataPage" class="container hidden fade-in">
      <h1>Enter Your Data</h1>
      <p>We need the following data to calculate your carbon footprint:</p>
      <input
        type="number"
        id="energy"
        placeholder="Energy Consumption (kWh/month)"
      />
      <input
        type="number"
        id="transport"
        placeholder="Transportation (km/month)"
      />
      <input
        type="number"
        id="food"
        placeholder="Food Consumption (kg/month)"
      />
      <input
        type="number"
        id="waste"
        placeholder="Waste Generation (kg/month)"
      />
      <button onclick="calculateFootprint()">Calculate</button>
    </div>

    <!-- Results Page -->
    <div id="resultsPage" class="container hidden fade-in">
      <h1>Your Carbon Footprint</h1>
      <p><b id="footprintResult"></b> kg CO2 per month.</p>
      <p>Recommendations to improve sustainability:</p>
      <ul id="tips"></ul>
      <button onclick="restart()">Start Over</button>
      <!-- Chart for results -->
      <div id="chartContainer">
        <canvas id="footprintChart"></canvas>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
      function goToNamePage() {
        const country = document.getElementById("country").value;
        if (!country) {
          alert("Please select your country.");
          return;
        }
        document.getElementById("welcomePage").classList.add("hidden");
        document.getElementById("namePage").classList.remove("hidden");
      }

      function goToDataPage() {
        const name = document.getElementById("name").value.trim();
        if (!name) {
          alert("Please enter your name.");
          return;
        }
        document.getElementById("namePage").classList.add("hidden");
        document.getElementById("dataPage").classList.remove("hidden");
      }

      function calculateFootprint() {
        const energy = parseFloat(document.getElementById("energy").value) || 0;
        const transport =
          parseFloat(document.getElementById("transport").value) || 0;
        const food = parseFloat(document.getElementById("food").value) || 0;
        const waste = parseFloat(document.getElementById("waste").value) || 0;

        const totalFootprint =
          energy * 0.7 + transport * 0.12 + food * 2.5 + waste * 1.5;
        document.getElementById("footprintResult").innerText =
          totalFootprint.toFixed(2);

        const tips = document.getElementById("tips");
        tips.innerHTML = ` 
        <li>Use energy-efficient appliances.</li>
        <li>Switch to carpooling or public transport.</li>
        <li>Consider a plant-based diet.</li>
        <li>Recycle and compost to reduce waste.</li>
      `;

        document.getElementById("dataPage").classList.add("hidden");
        document.getElementById("resultsPage").classList.remove("hidden");

        // Display chart
        displayChart(energy, transport, food, waste);
      }

      function displayChart(energy, transport, food, waste) {
        const ctx = document.getElementById("footprintChart").getContext("2d");
        new Chart(ctx, {
          type: "bar",
          data: {
            labels: ["Energy", "Transport", "Food", "Waste"],
            datasets: [
              {
                label: "Carbon Footprint Contribution (kg CO2)",
                data: [energy * 0.7, transport * 0.12, food * 2.5, waste * 1.5],
                backgroundColor: ["#3cb371", "#ff6347", "#ffa500", "#00bfff"],
                borderColor: ["#2e8b57", "#cc4f28", "#e09d28", "#0096c7"],
                borderWidth: 10, // Increased border width for visibility
              },
            ],
          },
          options: {
            responsive: true,
            scales: {
              y: {
                beginAtZero: true,
                grid: {
                  color: "#ddd", // Dark grid lines for better contrast
                },
                ticks: {
                  color: "#ddd", // Dark ticks for better visibility
                },
              },
              x: {
                grid: {
                  color: "#ddd", // Dark grid lines for x-axis as well
                },
                ticks: {
                  color: "#ddd", // Dark ticks for x-axis
                },
              },
            },
            plugins: {
              legend: {
                labels: {
                  color: "#333", // Dark text color for legend
                },
              },
            },
          },
        });
      }

      function restart() {
        location.reload();
      }
    </script>
  </body>
</html>
